language: elixir
elixir: '1.8.1'

env:
  - MIX_ENV=test

services:
  - postgresql

install:
  - cp config/test.secret.exs.example config/test.secret.exs
  - mix local.rebar --force
  - mix local.hex --force
  - mix deps.get

before_script:
  - mix do ecto.create, ecto.migrate

script:
  - mix test
  - mix credo --strict
